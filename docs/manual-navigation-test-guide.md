# 手動ナビゲーションテスト実施ガイド

## 目的
このガイドは、開発者がアプリケーションのナビゲーション機能を手動で確認するための簡易的な手順を提供します。

---

## 前提条件

- 開発サーバーが起動している (`npm run dev`)
- ブラウザの開発者ツールを開いておく（Console, Network タブ）
- Supabaseのテストデータが準備されている

---

## クイックテスト（5分）

### 1. 認証フロー
```
1. http://localhost:3000/ にアクセス
   → ログインページにリダイレクトされることを確認

2. ログイン
   → ダッシュボードに遷移することを確認

3. ログアウト
   → ログインページに戻ることを確認
```

### 2. 基本ナビゲーション
```
1. ログイン後、ヘッダーの各リンクをクリック
   - ダッシュボード
   - 従業員管理
   - 現場管理
   - 配属管理
   → 各ページが正しく表示されることを確認

2. ブラウザの「戻る」ボタンで前のページに戻れることを確認
```

### 3. CRUD操作フロー（従業員）
```
1. 従業員一覧 → 新規登録 → 保存
   → 詳細画面または一覧に遷移することを確認

2. 従業員詳細 → 編集 → 保存
   → 詳細画面に戻ることを確認

3. 従業員詳細 → 削除
   → 確認ダイアログ表示後、一覧に戻ることを確認
```

---

## 標準テスト（15分）

### 1. URLアクセステスト
以下のURLに直接アクセスして動作を確認：

```
未認証時:
- http://localhost:3000/dashboard → /login にリダイレクト
- http://localhost:3000/employees → /login にリダイレクト
- http://localhost:3000/sites → /login にリダイレクト
- http://localhost:3000/assignments → /login にリダイレクト

認証後:
- http://localhost:3000/ → /dashboard にリダイレクト
- http://localhost:3000/employees → 従業員一覧表示
- http://localhost:3000/employees/1 → 従業員詳細表示（ID=1）
- http://localhost:3000/employees/1/edit → 従業員編集フォーム表示
- http://localhost:3000/sites → 現場一覧表示
- http://localhost:3000/sites/1 → 現場詳細表示（ID=1）
- http://localhost:3000/assignments → 配属管理表示
- http://localhost:3000/profile → プロフィール表示

エラー:
- http://localhost:3000/invalid-path → 404ページ表示
- http://localhost:3000/employees/999999 → エラーハンドリング
```

### 2. パンくずリストテスト
各ページでパンくずリストが正しく表示されることを確認：

```
ダッシュボード: ホーム > ダッシュボード
従業員一覧: ホーム > 従業員管理 > 一覧
従業員詳細: ホーム > 従業員管理 > 一覧 > [従業員名]
従業員編集: ホーム > 従業員管理 > 一覧 > [従業員名] > 編集
現場一覧: ホーム > 現場管理 > 一覧
現場詳細: ホーム > 現場管理 > 一覧 > [現場名]
配属管理: ホーム > 配属管理
プロフィール: ホーム > プロフィール
```

### 3. ボタンナビゲーションテスト

#### ダッシュボード
```
クイックアクション:
- 「従業員登録」 → /employees/new
- 「現場登録」 → /sites/new
- 「配属登録」 → /assignments
```

#### 従業員管理
```
一覧画面:
- 「新規登録」 → /employees/new
- 従業員行クリック → /employees/:id

詳細画面:
- 「編集」 → /employees/:id/edit
- 「一覧に戻る」 → /employees
- 「削除」 → 確認後、/employees

編集画面:
- 「保存」 → /employees/:id（詳細）
- 「キャンセル」 → /employees/:id（詳細）
```

#### 現場管理
```
一覧画面:
- 「新規登録」 → /sites/new
- 現場カード/行クリック → /sites/:id

詳細画面:
- 「編集」 → /sites/:id/edit
- 「配属管理」 → /assignments?site=:id
- 「一覧に戻る」 → /sites
- 「削除」 → 確認後、/sites

編集画面:
- 「保存」 → /sites/:id（詳細）
- 「キャンセル」 → /sites/:id（詳細）
```

#### 配属管理
```
- 従業員詳細の「配属」ボタン → /assignments?employee=:id（従業員プリセレクト）
- 現場詳細の「配属管理」ボタン → /assignments?site=:id（現場プリセレクト）
```

---

## 包括的テスト（30分）

詳細なテストは `docs/navigation-test-checklist.md` を参照してください。

---

## テスト実施のポイント

### ブラウザ開発者ツールで確認すること

#### Console タブ
```
✓ エラーがないこと
✓ 警告が最小限であること
✓ ナビゲーション時に不要なログが出ていないこと
```

#### Network タブ
```
✓ APIリクエストが適切に実行されていること
✓ 404エラーがないこと
✓ 不要な重複リクエストがないこと
```

#### Elements タブ
```
✓ URLが正しく更新されていること
✓ パンくずリストが正しく表示されていること
✓ アクティブなナビゲーションリンクがハイライトされていること
```

---

## よくある問題と確認方法

### 1. ページが表示されない
```
確認項目:
- Console にエラーが出ていないか
- Network でAPIエラーが発生していないか
- ルート定義が正しいか（App.tsx, AppRoutes.tsx）
```

### 2. リダイレクトループ
```
確認項目:
- 認証状態が正しく管理されているか
- ProtectedRoute の条件が正しいか
- リダイレクト先が適切か
```

### 3. パラメータが渡らない
```
確認項目:
- URLパラメータ（:id）が正しく定義されているか
- useParams() で正しく取得されているか
- クエリパラメータ（?key=value）が正しく解析されているか
```

### 4. 戻るボタンで意図しないページに戻る
```
確認項目:
- navigate() の replace オプションが適切に使われているか
- 履歴スタックが正しく管理されているか
```

---

## テスト完了の判断基準

以下がすべて満たされていればテスト完了：

- [ ] すべての画面に遷移できる
- [ ] 認証ガードが正しく動作する
- [ ] パンくずリストが正しく表示される
- [ ] ボタンクリックで正しいページに遷移する
- [ ] URLパラメータが正しく処理される
- [ ] ブラウザの戻る/進むボタンが動作する
- [ ] 404ページが正しく表示される
- [ ] Console にエラーがない

---

## 報告

問題が見つかった場合は、以下の情報を含めて報告してください：

```
1. 発生したページ/URL
2. 操作手順
3. 期待される動作
4. 実際の動作
5. ブラウザ（Chrome, Firefox, Safari等）
6. Console エラーメッセージ（あれば）
7. スクリーンショット（あれば）
```